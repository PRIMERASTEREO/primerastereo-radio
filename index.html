<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRIMERA STEREO | RADIO ONLINE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link rel="icon" href="https://primerastereo.netlify.app/favicon.png">
    <style>
        /* Animación de pulso para el botón */
        @keyframes pulse-blue {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(3, 44, 252, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 15px rgba(3, 44, 252, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(3, 44, 252, 0); }
        }
        .pulsating { animation: pulse-blue 2s infinite; }

        /* Estilos para la Marquesina (Solo Canción) */
        .marquee-wrapper {
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            margin: 2px auto;
        }
        .marquee-content {
            display: inline-block;
            padding-left: 100%;
            animation: scroll-text 12s linear infinite;
        }
        @keyframes scroll-text {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }

        body {
            height: 100vh; margin: 0; overflow: hidden; display: flex; flex-direction: column;
            background: url('https://primerastereo.netlify.app/favicon.png') no-repeat center center fixed;
            background-size: cover; font-family: 'Segoe UI', sans-serif;
            justify-content: space-between;
        }

        .overlay-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); z-index: 0;
        }

        .main-content { flex: 1; display: flex; align-items: center; justify-content: center; z-index: 1; padding: 10px; min-height: 0; }
        
        .radio-container { 
            width: 100%; max-width: 280px; padding: 15px; 
            background: rgba(255, 255, 255, 0.03); border-radius: 35px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.9);
            border: 1px solid rgba(255,255,255,0.1); text-align: center;
        }

        #track-cover { width: 150px; height: 150px; border-radius: 20px; margin-bottom: 15px; object-fit: cover; box-shadow: 0 15px 30px rgba(0,0,0,0.7); }

        .visualizer-container { height: 45px; display: flex; justify-content: center; align-items: center; gap: 3px; margin-bottom: 15px; }
        
        .bar { 
            width: 4px; height: 6px; 
            background: linear-gradient(to top, #fc0303, #032cfc, #f8fc03); 
            border-radius: 10px; 
        }

        .play-btn { width: 55px; height: 55px; border-radius: 50%; background: #032cfc; color: white; border: none; font-size: 1.4rem; cursor: pointer; transition: 0.3s; }
        
        .volume-slider { width: 140px; accent-color: #032cfc; margin-top: 15px; cursor: pointer; }

        /* Contenedor de textos con artista fijo */
        .now-playing { color: white; font-size: 0.85rem; margin-top: 5px; min-height: 50px; width: 100%; overflow: hidden; }
        #artist-text { color: white; font-weight: normal; margin-bottom: 2px; display: block; }
        
        footer { padding: 10px; text-align: center; z-index: 1; }
        .social-icons { display: flex; justify-content: center; gap: 10px; margin-bottom: 8px; flex-wrap: wrap; }
        .social-btn { color: white; font-size: 1.3rem; opacity: 0.7; transition: 0.3s; }
        .social-btn:hover { opacity: 1; color: #032cfc; transform: scale(1.1); }
    </style>
</head>
<body>

    <div class="overlay-bg"></div>

    <div class="main-content">
        <div class="radio-container">
            <h1 style="color:white; font-size:1.3rem; margin:2; letter-spacing: 1px;">PRIMERA STEREO</h1>
            <p style="color:#ffffff; font-size:0.9rem; margin-bottom:15px; font-weight: bold; text-transform: uppercase;">Radio Online</p>
            
            <img id="track-cover" src="https://primerastereo.netlify.app/favicon.png">

            <div class="visualizer-container" id="visualizer">
                <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
                <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
                <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
            </div>
            
            <button class="play-btn" id="play-btn"><i class="fas fa-play"></i></button>
            
            <div>
                <input type="range" min="0" max="1" step="0.01" value="0.7" class="volume-slider" id="volume-slider">
            </div>
            
            <div class="now-playing" id="now-playing">
                <span id="artist-text">Sintonizando...</span>
                <div class="marquee-wrapper">
                    <b id="song-text" class="marquee-content" style="color:#ffffff">PRIMERA STEREO</b>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="social-icons">
            <a href="https://facebook.com/PrimeraStereoRadio" target="_blank" class="social-btn"><i class="fa-brands fa-facebook-f"></i></a>
            <a href="https://instagram.com/Primera.Stereo/" target="_blank" class="social-btn"><i class="fa-brands fa-instagram"></i></a>
            <a href="https://t.me/PrimeraStereo" target="_blank" class="social-btn"><i class="fab fa-telegram"></i></a>
            <a href="https://tiktok.com/@primerastereo" target="_blank" class="social-btn"><i class="fab fa-tiktok"></i></a>
            <a href="https://www.twitter.com/Primera_Stereo" target="_blank" class="social-btn"><i class="fa-brands fa-x-twitter"></i></a>
            <a href="https://soundcloud.com/primerastereo" target="_blank" class="social-btn"><i class="fab fa-soundcloud"></i></a>
            <a href="https://www.appcreator24.com/app903548-fpnj0d" target="_blank" class="social-btn"><i class="fab fa-google-play"></i></a>
            <a href="https://api.whatsapp.com/send?phone=+5804127097429" target="_blank" class="social-btn"><i class="fa-brands fa-whatsapp"></i></a>
            <a href="https://www.youtube.com/@primerastereo" target="_blank" class="social-btn"><i class="fa-brands fa-youtube"></i></a>
        </div>
        <p style="color:#ffffff; font-size:0.65rem; margin:0;">© 2026 PRIMERA STEREO RADIO ONLINE</p>
    </footer>

    <script>
        const audio = new Audio();
        audio.crossOrigin = "anonymous";
        const STREAM_URL = 'https://primerastereo.stream.laut.fm/primerastereo';
        let isPlaying = false;
        let audioCtx, analyser, dataArray;

        function updateMetadata() {
            fetch("https://api.laut.fm/station/primerastereo/current_song")
            .then(r => r.json()).then(data => {
                if (!data || !data.artist) return;
                
                document.getElementById('artist-text').innerText = data.artist.name;
                document.getElementById('song-text').innerText = data.title;

                const query = encodeURIComponent(`${data.artist.name} ${data.title}`);
                fetch(`https://itunes.apple.com/search?term=${query}&media=music&limit=1`)
                .then(r => r.json()).then(it => {
                    document.getElementById('track-cover').src = it.resultCount > 0 ? it.results[0].artworkUrl100.replace('100x100bb', '600x600bb') : "https://primerastereo.netlify.app/favicon.png";
                });
            }).catch(() => {});
        }

        function togglePlay() {
            const btn = document.getElementById('play-btn');
            if (!isPlaying) {
                audio.src = STREAM_URL + "?t=" + Date.now();
                audio.play().then(() => {
                    isPlaying = true;
                    btn.classList.add('pulsating');
                    btn.innerHTML = '<i class="fas fa-pause"></i>';
                    
                    if (!audioCtx) {
                        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                        analyser = audioCtx.createAnalyser();
                        const source = audioCtx.createMediaElementSource(audio);
                        source.connect(analyser);
                        analyser.connect(audioCtx.destination);
                        analyser.fftSize = 128;
                        dataArray = new Uint8Array(analyser.frequencyBinCount);
                    }
                    updateMetadata();
                    draw();
                }).catch(e => console.log("Autoplay bloqueado"));
            } else {
                audio.pause();
                audio.src = "";
                isPlaying = false;
                btn.classList.remove('pulsating');
                btn.innerHTML = '<i class="fas fa-play"></i>';
                document.querySelectorAll('.bar').forEach(b => b.style.height = "6px");
            }
        }

        function draw() {
            if (!isPlaying) return;
            analyser.getByteFrequencyData(dataArray);
            document.querySelectorAll('.bar').forEach((bar, i) => {
                const index = Math.floor(i * (dataArray.length / 15) * 0.6);
                bar.style.height = (6 + ((dataArray[index] / 255) * 40)) + "px";
            });
            requestAnimationFrame(draw);
        }

        window.addEventListener('load', () => {
            togglePlay();
            setInterval(updateMetadata, 15000);
        });

        document.getElementById('play-btn').onclick = togglePlay;
        document.getElementById('volume-slider').oninput = (e) => audio.volume = e.target.value;
    </script>
</body>
</html>
